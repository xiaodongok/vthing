{"version":3,"file":"vthing.bundle.js","sources":["../core/src/input-number/index.ts"],"sourcesContent":["import {ObjectDirective} from \"@vue/runtime-core\"\r\nimport {\r\n  toNumber,\r\n} from '@vue/shared'\r\n\r\nfunction onCompositionStart(e:Event) {\r\n  (e.target as any).composing = true\r\n}\r\n\r\nfunction onCompositionEnd(e: Event) {\r\n  const target = e.target as any\r\n  if (target.composing) {\r\n    target.composing = false\r\n    target.dispatchEvent(new Event('input'))\r\n  }\r\n}\r\n\r\nexport const vInputNumber: ObjectDirective<HTMLInputElement | HTMLTextAreaElement> = {\r\n  created(el, binding, vnode) {\r\n\r\n    el.addEventListener(\"input\", e => {\r\n      let domValue: string | number = el.value\r\n      el.value = toNumber(domValue)\r\n\r\n      el.addEventListener('compositionstart', onCompositionStart)\r\n      el.addEventListener('compositionend', onCompositionEnd)\r\n      el.addEventListener('change', onCompositionEnd)\r\n    })\r\n  },\r\n  // set value on mounted so it's after min/max for type=\"range\"\r\n  mounted(el, {value}) {\r\n    el.value = value == null ? '' : value\r\n  },\r\n  beforeUpdate(el, {value}, vnode) {\r\n    if ((el as any).composing) return\r\n    console.log(value,\"value\")\r\n    const newValue = value == null ? '' : value\r\n    if (el.value !== newValue) {\r\n      el.value = newValue\r\n    }\r\n  }\r\n}\r\n"],"names":["toNumber"],"mappings":";;;;;;AAKA,SAAS,kBAAkB,CAAC,CAAO,EAAA;AAChC,IAAA,CAAC,CAAC,MAAc,CAAC,SAAS,GAAG,IAAI,CAAA;AACpC,CAAC;AAED,SAAS,gBAAgB,CAAC,CAAQ,EAAA;AAChC,IAAA,MAAM,MAAM,GAAG,CAAC,CAAC,MAAa,CAAA;IAC9B,IAAI,MAAM,CAAC,SAAS,EAAE;AACpB,QAAA,MAAM,CAAC,SAAS,GAAG,KAAK,CAAA;QACxB,MAAM,CAAC,aAAa,CAAC,IAAI,KAAK,CAAC,OAAO,CAAC,CAAC,CAAA;AACzC,KAAA;AACH,CAAC;AAEY,MAAA,YAAY,GAA4D;AACnF,IAAA,OAAO,CAAC,EAAE,EAAE,OAAO,EAAE,KAAK,EAAA;AAExB,QAAA,EAAE,CAAC,gBAAgB,CAAC,OAAO,EAAE,CAAC,IAAG;AAC/B,YAAA,IAAI,QAAQ,GAAoB,EAAE,CAAC,KAAK,CAAA;AACxC,YAAA,EAAE,CAAC,KAAK,GAAGA,eAAQ,CAAC,QAAQ,CAAC,CAAA;AAE7B,YAAA,EAAE,CAAC,gBAAgB,CAAC,kBAAkB,EAAE,kBAAkB,CAAC,CAAA;AAC3D,YAAA,EAAE,CAAC,gBAAgB,CAAC,gBAAgB,EAAE,gBAAgB,CAAC,CAAA;AACvD,YAAA,EAAE,CAAC,gBAAgB,CAAC,QAAQ,EAAE,gBAAgB,CAAC,CAAA;AACjD,SAAC,CAAC,CAAA;KACH;;AAED,IAAA,OAAO,CAAC,EAAE,EAAE,EAAC,KAAK,EAAC,EAAA;AACjB,QAAA,EAAE,CAAC,KAAK,GAAG,KAAK,IAAI,IAAI,GAAG,EAAE,GAAG,KAAK,CAAA;KACtC;AACD,IAAA,YAAY,CAAC,EAAE,EAAE,EAAC,KAAK,EAAC,EAAE,KAAK,EAAA;QAC7B,IAAK,EAAU,CAAC,SAAS;YAAE,OAAM;AACjC,QAAA,OAAO,CAAC,GAAG,CAAC,KAAK,EAAC,OAAO,CAAC,CAAA;AAC1B,QAAA,MAAM,QAAQ,GAAG,KAAK,IAAI,IAAI,GAAG,EAAE,GAAG,KAAK,CAAA;AAC3C,QAAA,IAAI,EAAE,CAAC,KAAK,KAAK,QAAQ,EAAE;AACzB,YAAA,EAAE,CAAC,KAAK,GAAG,QAAQ,CAAA;AACpB,SAAA;KACF;;;;;"}